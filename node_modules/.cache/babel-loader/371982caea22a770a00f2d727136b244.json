{"ast":null,"code":"import _slicedToArray from \"@babel/runtime/helpers/esm/slicedToArray\";\nimport _defineProperty from \"@babel/runtime/helpers/esm/defineProperty\";\nfunction ownKeys(object, enumerableOnly) {\n  var keys = Object.keys(object);\n  if (Object.getOwnPropertySymbols) {\n    var symbols = Object.getOwnPropertySymbols(object);\n    if (enumerableOnly) symbols = symbols.filter(function (sym) {\n      return Object.getOwnPropertyDescriptor(object, sym).enumerable;\n    });\n    keys.push.apply(keys, symbols);\n  }\n  return keys;\n}\nfunction _objectSpread(target) {\n  for (var i = 1; i < arguments.length; i++) {\n    var source = arguments[i] != null ? arguments[i] : {};\n    if (i % 2) {\n      ownKeys(Object(source), true).forEach(function (key) {\n        _defineProperty(target, key, source[key]);\n      });\n    } else if (Object.getOwnPropertyDescriptors) {\n      Object.defineProperties(target, Object.getOwnPropertyDescriptors(source));\n    } else {\n      ownKeys(Object(source)).forEach(function (key) {\n        Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key));\n      });\n    }\n  }\n  return target;\n}\nimport * as React from 'react';\nimport { useState, useRef, useCallback, useContext, useImperativeHandle, forwardRef } from 'react';\nimport * as PropTypes from 'prop-types';\nimport WebMercatorViewport from 'viewport-mercator-project';\nimport ResizeObserver from 'resize-observer-polyfill';\nimport Mapbox from '../mapbox/mapbox';\nimport mapboxgl from '../utils/mapboxgl';\nimport { checkVisibilityConstraints } from '../utils/map-constraints';\nimport { MAPBOX_LIMITS } from '../utils/map-state';\nimport MapContext, { MapContextProvider } from './map-context';\nimport useIsomorphicLayoutEffect from '../utils/use-isomorphic-layout-effect';\nimport { getTerrainElevation } from '../utils/terrain';\nvar TOKEN_DOC_URL = 'https://visgl.github.io/react-map-gl/docs/get-started/mapbox-tokens';\nvar NO_TOKEN_WARNING = 'A valid API access token is required to use Mapbox data';\nfunction noop() {}\nexport function getViewport(_ref) {\n  var map = _ref.map,\n    props = _ref.props,\n    width = _ref.width,\n    height = _ref.height;\n  var viewportProps = _objectSpread(_objectSpread(_objectSpread({}, props), props.viewState), {}, {\n    width: width,\n    height: height\n  });\n  viewportProps.position = [0, 0, getTerrainElevation(map, viewportProps)];\n  return new WebMercatorViewport(viewportProps);\n}\nvar UNAUTHORIZED_ERROR_CODE = 401;\nvar CONTAINER_STYLE = {\n  position: 'absolute',\n  width: '100%',\n  height: '100%',\n  overflow: 'hidden'\n};\nvar propTypes = Object.assign({}, Mapbox.propTypes, {\n  width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  onResize: PropTypes.func,\n  disableTokenWarning: PropTypes.bool,\n  visible: PropTypes.bool,\n  className: PropTypes.string,\n  style: PropTypes.object,\n  visibilityConstraints: PropTypes.object\n});\nvar defaultProps = Object.assign({}, Mapbox.defaultProps, {\n  disableTokenWarning: false,\n  visible: true,\n  onResize: noop,\n  className: '',\n  style: null,\n  visibilityConstraints: MAPBOX_LIMITS\n});\nfunction NoTokenWarning() {\n  var style = {\n    position: 'absolute',\n    left: 0,\n    top: 0\n  };\n  return React.createElement(\"div\", {\n    key: \"warning\",\n    id: \"no-token-warning\",\n    style: style\n  }, React.createElement(\"h3\", {\n    key: \"header\"\n  }, NO_TOKEN_WARNING), React.createElement(\"div\", {\n    key: \"text\"\n  }, \"For information on setting up your basemap, read\"), React.createElement(\"a\", {\n    key: \"link\",\n    href: TOKEN_DOC_URL\n  }, \"Note on Map Tokens\"));\n}\nfunction getRefHandles(mapboxRef) {\n  return {\n    getMap: function getMap() {\n      return mapboxRef.current && mapboxRef.current.getMap();\n    },\n    queryRenderedFeatures: function queryRenderedFeatures(geometry) {\n      var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n      var map = mapboxRef.current && mapboxRef.current.getMap();\n      return map && map.queryRenderedFeatures(geometry, options);\n    }\n  };\n}\nvar StaticMap = forwardRef(function (props, ref) {\n  var _useState = useState(true),\n    _useState2 = _slicedToArray(_useState, 2),\n    accessTokenValid = _useState2[0],\n    setTokenState = _useState2[1];\n  var _useState3 = useState({\n      width: 0,\n      height: 0\n    }),\n    _useState4 = _slicedToArray(_useState3, 2),\n    size = _useState4[0],\n    setSize = _useState4[1];\n  var mapboxRef = useRef(null);\n  var mapDivRef = useRef(null);\n  var containerRef = useRef(null);\n  var overlayRef = useRef(null);\n  var context = useContext(MapContext);\n  useIsomorphicLayoutEffect(function () {\n    if (!StaticMap.supported()) {\n      return undefined;\n    }\n    var mapbox = new Mapbox(_objectSpread(_objectSpread(_objectSpread({}, props), size), {}, {\n      mapboxgl: mapboxgl,\n      container: mapDivRef.current,\n      onError: function onError(evt) {\n        var statusCode = evt.error && evt.error.status || evt.status;\n        if (statusCode === UNAUTHORIZED_ERROR_CODE && accessTokenValid) {\n          console.error(NO_TOKEN_WARNING);\n          setTokenState(false);\n        }\n        props.onError(evt);\n      }\n    }));\n    mapboxRef.current = mapbox;\n    if (context && context.setMap) {\n      context.setMap(mapbox.getMap());\n    }\n    var resizeObserver = new ResizeObserver(function (entries) {\n      if (entries[0].contentRect) {\n        var _entries$0$contentRec = entries[0].contentRect,\n          _width = _entries$0$contentRec.width,\n          _height = _entries$0$contentRec.height;\n        setSize({\n          width: _width,\n          height: _height\n        });\n        props.onResize({\n          width: _width,\n          height: _height\n        });\n      }\n    });\n    resizeObserver.observe(containerRef.current);\n    return function () {\n      mapbox.finalize();\n      mapboxRef.current = null;\n      resizeObserver.disconnect();\n    };\n  }, []);\n  useIsomorphicLayoutEffect(function () {\n    if (mapboxRef.current) {\n      mapboxRef.current.setProps(_objectSpread(_objectSpread({}, props), size));\n    }\n  });\n  var map = mapboxRef.current && mapboxRef.current.getMap();\n  useImperativeHandle(ref, function () {\n    return getRefHandles(mapboxRef);\n  }, []);\n  var preventScroll = useCallback(function (_ref2) {\n    var target = _ref2.target;\n    if (target === overlayRef.current) {\n      target.scrollTo(0, 0);\n    }\n  }, []);\n  var overlays = map && React.createElement(MapContextProvider, {\n    value: _objectSpread(_objectSpread({}, context), {}, {\n      viewport: context.viewport || getViewport(_objectSpread({\n        map: map,\n        props: props\n      }, size)),\n      map: map,\n      container: context.container || containerRef.current\n    })\n  }, React.createElement(\"div\", {\n    key: \"map-overlays\",\n    className: \"overlays\",\n    ref: overlayRef,\n    style: CONTAINER_STYLE,\n    onScroll: preventScroll\n  }, props.children));\n  var className = props.className,\n    width = props.width,\n    height = props.height,\n    style = props.style,\n    visibilityConstraints = props.visibilityConstraints;\n  var mapContainerStyle = Object.assign({\n    position: 'relative'\n  }, style, {\n    width: width,\n    height: height\n  });\n  var visible = props.visible && checkVisibilityConstraints(props.viewState || props, visibilityConstraints);\n  var mapStyle = Object.assign({}, CONTAINER_STYLE, {\n    visibility: visible ? 'inherit' : 'hidden'\n  });\n  return React.createElement(\"div\", {\n    key: \"map-container\",\n    ref: containerRef,\n    style: mapContainerStyle\n  }, React.createElement(\"div\", {\n    key: \"map-mapbox\",\n    ref: mapDivRef,\n    style: mapStyle,\n    className: className\n  }), overlays, !accessTokenValid && !props.disableTokenWarning && React.createElement(NoTokenWarning, null));\n});\nStaticMap.supported = function () {\n  return mapboxgl && mapboxgl.supported();\n};\nStaticMap.propTypes = propTypes;\nStaticMap.defaultProps = defaultProps;\nexport default StaticMap;","map":{"version":3,"names":["React","useState","useRef","useCallback","useContext","useImperativeHandle","forwardRef","PropTypes","WebMercatorViewport","ResizeObserver","Mapbox","mapboxgl","checkVisibilityConstraints","MAPBOX_LIMITS","MapContext","MapContextProvider","useIsomorphicLayoutEffect","getTerrainElevation","TOKEN_DOC_URL","NO_TOKEN_WARNING","noop","getViewport","_ref","map","props","width","height","viewportProps","_objectSpread","viewState","position","UNAUTHORIZED_ERROR_CODE","CONTAINER_STYLE","overflow","propTypes","Object","assign","oneOfType","number","string","onResize","func","disableTokenWarning","bool","visible","className","style","object","visibilityConstraints","defaultProps","NoTokenWarning","left","top","createElement","key","id","href","getRefHandles","mapboxRef","getMap","current","queryRenderedFeatures","geometry","options","arguments","length","undefined","StaticMap","ref","_useState","_useState2","_slicedToArray","accessTokenValid","setTokenState","_useState3","_useState4","size","setSize","mapDivRef","containerRef","overlayRef","context","supported","mapbox","container","onError","evt","statusCode","error","status","console","setMap","resizeObserver","entries","contentRect","_entries$0$contentRec","_width","_height","observe","finalize","disconnect","setProps","preventScroll","_ref2","target","scrollTo","overlays","value","viewport","onScroll","children","mapContainerStyle","mapStyle","visibility"],"sources":["../../../src/components/static-map.js"],"sourcesContent":["// Copyright (c) 2015 Uber Technologies, Inc.\n\n// Permission is hereby granted, free of charge, to any person obtaining a copy\n// of this software and associated documentation files (the \"Software\"), to deal\n// in the Software without restriction, including without limitation the rights\n// to use, copy, modify, merge, publish, distribute, sublicense, and/or sell\n// copies of the Software, and to permit persons to whom the Software is\n// furnished to do so, subject to the following conditions:\n\n// The above copyright notice and this permission notice shall be included in\n// all copies or substantial portions of the Software.\n\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR\n// IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,\n// FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE\n// AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER\n// LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,\n// OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN\n// THE SOFTWARE.\nimport * as React from 'react';\nimport {useState, useRef, useCallback, useContext, useImperativeHandle, forwardRef} from 'react';\nimport * as PropTypes from 'prop-types';\n\nimport WebMercatorViewport from 'viewport-mercator-project';\nimport ResizeObserver from 'resize-observer-polyfill';\n\nimport Mapbox from '../mapbox/mapbox';\nimport mapboxgl from '../utils/mapboxgl';\nimport {checkVisibilityConstraints} from '../utils/map-constraints';\nimport {MAPBOX_LIMITS} from '../utils/map-state';\nimport MapContext, {MapContextProvider} from './map-context';\nimport useIsomorphicLayoutEffect from '../utils/use-isomorphic-layout-effect';\nimport {getTerrainElevation} from '../utils/terrain';\n\n/* eslint-disable max-len */\nconst TOKEN_DOC_URL = 'https://visgl.github.io/react-map-gl/docs/get-started/mapbox-tokens';\nconst NO_TOKEN_WARNING = 'A valid API access token is required to use Mapbox data';\n/* eslint-disable max-len */\n\nfunction noop() {}\n\nexport function getViewport({map, props, width, height}) {\n  const viewportProps = {\n    ...props,\n    ...props.viewState,\n    width,\n    height\n  };\n  viewportProps.position = [0, 0, getTerrainElevation(map, viewportProps)];\n  return new WebMercatorViewport(viewportProps);\n}\n\nconst UNAUTHORIZED_ERROR_CODE = 401;\n\nconst CONTAINER_STYLE = {\n  position: 'absolute',\n  width: '100%',\n  height: '100%',\n  overflow: 'hidden'\n};\n\nconst propTypes = Object.assign({}, Mapbox.propTypes, {\n  /** The dimensions of the map **/\n  width: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n  height: PropTypes.oneOfType([PropTypes.number, PropTypes.string]),\n\n  /** Callback when map size changes **/\n  onResize: PropTypes.func,\n  /** Hide invalid token warning even if request fails */\n  disableTokenWarning: PropTypes.bool,\n  /** Whether the map is visible */\n  visible: PropTypes.bool,\n  /** Custom class name for the map */\n  className: PropTypes.string,\n  /** Custom CSS for the container */\n  style: PropTypes.object,\n\n  /** Advanced features */\n  // Contraints for displaying the map. If not met, then the map is hidden.\n  // Experimental! May be changed in minor version updates.\n  visibilityConstraints: PropTypes.object\n});\n\nconst defaultProps = Object.assign({}, Mapbox.defaultProps, {\n  disableTokenWarning: false,\n  visible: true,\n  onResize: noop,\n  className: '',\n  style: null,\n  visibilityConstraints: MAPBOX_LIMITS\n});\n\nfunction NoTokenWarning() {\n  const style = {\n    position: 'absolute',\n    left: 0,\n    top: 0\n  };\n  return (\n    <div\n      key=\"warning\"\n      id=\"no-token-warning\"\n      // @ts-ignore\n      style={style}\n    >\n      <h3 key=\"header\">{NO_TOKEN_WARNING}</h3>\n      <div key=\"text\">For information on setting up your basemap, read</div>\n      <a key=\"link\" href={TOKEN_DOC_URL}>\n        Note on Map Tokens\n      </a>\n    </div>\n  );\n}\n\nfunction getRefHandles(mapboxRef) {\n  return {\n    getMap: () => mapboxRef.current && mapboxRef.current.getMap(),\n    queryRenderedFeatures: (geometry, options = {}) => {\n      const map = mapboxRef.current && mapboxRef.current.getMap();\n      return map && map.queryRenderedFeatures(geometry, options);\n    }\n  };\n}\n\nconst StaticMap = forwardRef((props, ref) => {\n  const [accessTokenValid, setTokenState] = useState(true);\n  const [size, setSize] = useState({width: 0, height: 0});\n  const mapboxRef = useRef(null);\n  const mapDivRef = useRef(null);\n  const containerRef = useRef(null);\n  const overlayRef = useRef(null);\n  const context = useContext(MapContext);\n\n  useIsomorphicLayoutEffect(() => {\n    if (!StaticMap.supported()) {\n      return undefined;\n    }\n\n    // Initialize\n    const mapbox = new Mapbox({\n      ...props,\n      ...size,\n      mapboxgl, // Handle to mapbox-gl library\n      container: mapDivRef.current,\n      onError: evt => {\n        const statusCode = (evt.error && evt.error.status) || evt.status;\n        if (statusCode === UNAUTHORIZED_ERROR_CODE && accessTokenValid) {\n          // Mapbox throws unauthorized error - invalid token\n          console.error(NO_TOKEN_WARNING); // eslint-disable-line\n          setTokenState(false);\n        }\n        props.onError(evt);\n      }\n    });\n    mapboxRef.current = mapbox;\n\n    if (context && context.setMap) {\n      context.setMap(mapbox.getMap());\n    }\n\n    const resizeObserver = new ResizeObserver(entries => {\n      if (entries[0].contentRect) {\n        const {width, height} = entries[0].contentRect;\n        setSize({width, height});\n        props.onResize({width, height});\n      }\n    });\n    resizeObserver.observe(containerRef.current);\n\n    // Clean up\n    return () => {\n      mapbox.finalize();\n      mapboxRef.current = null;\n      resizeObserver.disconnect();\n    };\n  }, []);\n\n  useIsomorphicLayoutEffect(() => {\n    if (mapboxRef.current) {\n      mapboxRef.current.setProps({...props, ...size});\n    }\n  });\n\n  const map = mapboxRef.current && mapboxRef.current.getMap();\n\n  // External apps can call methods via ref\n  // Note: this is not a recommended pattern in React FC - Keeping for backward compatibility\n  useImperativeHandle(ref, () => getRefHandles(mapboxRef), []);\n\n  const preventScroll = useCallback(({target}) => {\n    if (target === overlayRef.current) {\n      target.scrollTo(0, 0);\n    }\n  }, []);\n\n  const overlays = map && (\n    <MapContextProvider\n      value={{\n        ...context,\n        viewport: context.viewport || getViewport({map, props, ...size}),\n        map,\n        container: context.container || containerRef.current\n      }}\n    >\n      <div\n        key=\"map-overlays\"\n        className=\"overlays\"\n        ref={overlayRef}\n        // @ts-ignore\n        style={CONTAINER_STYLE}\n        onScroll={preventScroll}\n      >\n        {props.children}\n      </div>\n    </MapContextProvider>\n  );\n\n  const {className, width, height, style, visibilityConstraints} = props;\n  const mapContainerStyle = Object.assign({position: 'relative'}, style, {\n    width,\n    height\n  });\n\n  const visible =\n    props.visible && checkVisibilityConstraints(props.viewState || props, visibilityConstraints);\n\n  const mapStyle = Object.assign({}, CONTAINER_STYLE, {\n    visibility: visible ? 'inherit' : 'hidden'\n  });\n\n  return (\n    <div\n      key=\"map-container\"\n      ref={containerRef}\n      // @ts-ignore\n      style={mapContainerStyle}\n    >\n      <div\n        key=\"map-mapbox\"\n        ref={mapDivRef}\n        // @ts-ignore\n        style={mapStyle}\n        className={className}\n      />\n      {overlays}\n      {!accessTokenValid && !props.disableTokenWarning && <NoTokenWarning />}\n    </div>\n  );\n});\n\nStaticMap.supported = () => mapboxgl && mapboxgl.supported();\nStaticMap.propTypes = propTypes;\nStaticMap.defaultProps = defaultProps;\n\nexport default StaticMap;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}